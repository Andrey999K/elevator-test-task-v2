(function(){"use strict";var t={4104:function(t,o,e){var r=e(6369),n=function(){var t=this,o=t._self._c;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"container"},[t._l(t.mines,(function(e,r){return o("MineElevator",{key:r,attrs:{floors:t.floors,mine:e}})})),o("div",{staticClass:"buttons"},t._l(t.reverseMass,(function(e){return o("div",{key:e.numberFloor,staticClass:"buttons__item"},[o("span",{staticClass:"buttons__item-number"},[t._v(t._s(e.numberFloor))]),o("button",{staticClass:"buttons__item-button",class:{active:e.buttonActive},on:{click:function(o){return t.addFloorList(e)}}},[o("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("circle",{attrs:{cx:"7.5",cy:"7.5",r:"3.75"}}),o("circle",{attrs:{cx:"7.5",cy:"7.5",r:"7"}})])])])})),0)],2)])},i=[],s=(e(7658),function(){var t=this,o=t._self._c;return o("div",{staticClass:"mine"},[t._l(t.floors,(function(t){return o("div",{key:t.numberFloor,staticClass:"floor"})})),o("div",{staticClass:"elevator",class:{"elevator-pause":t.mine.stoped},style:{bottom:`${t.mine.currentHeight}%`,height:`calc(100% / ${this.floors.length})`}},[o("div",{staticClass:"elevator__indication",class:t.mine.direction},[o("div",{staticClass:"elevator__indication-direction"},[o("svg",{staticClass:"arrow-up",attrs:{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{d:"M6.56569 0.434315C6.25327 0.121895 5.74673 0.121895 5.43431 0.434315L0.343146 5.52548C0.0307262 5.8379 0.0307262 6.34443 0.343146 6.65685C0.655565 6.96927 1.1621 6.96927 1.47452 6.65685L6 2.13137L10.5255 6.65685C10.8379 6.96927 11.3444 6.96927 11.6569 6.65685C11.9693 6.34443 11.9693 5.8379 11.6569 5.52548L6.56569 0.434315ZM6.8 11L6.8 1H5.2L5.2 11H6.8Z",fill:"white"}})]),o("svg",{staticClass:"arrow-down",attrs:{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{d:"M5.43431 10.5657C5.74673 10.8781 6.25327 10.8781 6.56569 10.5657L11.6569 5.47452C11.9693 5.1621 11.9693 4.65557 11.6569 4.34315C11.3444 4.03073 10.8379 4.03073 10.5255 4.34315L6 8.86863L1.47452 4.34315C1.1621 4.03073 0.655565 4.03073 0.343146 4.34315C0.0307262 4.65557 0.0307262 5.1621 0.343146 5.47452L5.43431 10.5657ZM5.2 0L5.2 10H6.8L6.8 0L5.2 0Z",fill:"white"}})])]),o("span",{staticClass:"elevator__indication-floor"},[t._v(t._s(t.mine.onFloor))])])])],2)}),l=[],a={props:["floors","mine"]},c=a,u=e(1001),h=(0,u.Z)(c,s,l,!1,null,null,null),f=h.exports,v={name:"App",data(){return{mines:[],floors:[],orderVisitFloor:[],elevatorsStatusStart:!1}},methods:{addFloorList:function(t){for(let o=0;o<this.orderVisitFloor.length;o++)if(this.orderVisitFloor[o]===t.numberFloor)return;console.log(this.elevatorOnFloor(t.numberFloor)),this.elevatorOnFloor(t.numberFloor)||(this.orderVisitFloor.push(t.numberFloor),this.saveOrderData(),t.buttonActive=!0,console.log(this.mines))},findFreeElevators:function(){let t=[];return this.mines.forEach((o=>{o.freeElevator&&t.push(o)})),t},getNearestElevator:function(t,o){let e=t[0];for(let r=0;r<t.length-1;r++)Math.abs(t[r].currentFloor-o)>Math.abs(t[r+1].currentFloor-o)&&(e=t[r+1]);return e},moveFloor:function(t){let o=setInterval((()=>{if(t.currentFloor<t.onFloor)t.currentHeight+=.25;else{if(!(t.currentFloor>t.onFloor))return!1;t.currentHeight-=.25}t.currentHeight===Math.ceil(100/this.floors.length*(t.onFloor-1))&&(t.stoped=!0,clearInterval(o),t.orderVisitFloor.shift(),t.currentFloor=t.onFloor,this.saveData(),setTimeout((()=>{this.floors[t.onFloor-1].buttonActive=!1,t.stoped=!1,0===t.orderVisitFloor.length&&(t.freeElevator=!0),t.direction="stop",this.saveData()}),3e3))}),250/(100/this.floors.length))},getData:async function(){let t=await fetch("data.json");return await t.json()},distributor:function(){if(0!==this.orderVisitFloor.length&&0!==this.findFreeElevators().length){const t=this.orderVisitFloor[0],o=this.getNearestElevator(this.findFreeElevators(),t);o.orderVisitFloor.push(t),this.orderVisitFloor.shift(),o.freeElevator=!1,o.onFloor=t,o.currentFloor<t?o.direction="move-up":o.direction="move-down",this.moveFloor(o)}},elevatorOnFloor:function(t){for(let o=0;o<this.mines.length;o++)if(this.mines[o].currentFloor===t&&this.mines[o].onFloor===t)return!0;return!1},saveData:function(){localStorage.setItem("floors",JSON.stringify(this.floors)),localStorage.setItem("mines",JSON.stringify(this.mines))},saveOrderData:function(){localStorage.setItem("orderVisitFloor",JSON.stringify(this.orderVisitFloor))},createMines:function(t,o=!1){if(o){for(let t=0;t<o.length;t++)this.mines.push({currentFloor:o[t].currentFloor,currentHeight:o[t].currentHeight,freeElevator:o[t].currentFloor===o[t].onFloor||o[t].freeElevator,direction:o[t].currentFloor===o[t].onFloor?"stop":o[t].direction,onFloor:o[t].onFloor,stoped:o[t].currentFloor!==o[t].onFloor&&o[t].stoped,orderVisitFloor:o[t].orderVisitFloor});for(let t=0;t<this.mines.length;t++)"stop"===this.mines[t].direction&&(this.floors[this.mines[t].currentFloor-1].buttonActive=!1)}else for(let e=0;e<t;e++)this.mines.push({currentFloor:1,currentHeight:0,freeElevator:!0,direction:"stop",onFloor:0,stoped:!1,orderVisitFloor:[]})},createFloors:function(t,o=!1){if(o)for(let e=0;e<o.length;e++)this.floors.push({numberFloor:o[e].numberFloor,buttonActive:o[e].buttonActive});else for(let e=1;e<=t;e++)this.floors.push({numberFloor:e,buttonActive:!1})}},computed:{reverseMass(){return[...this.floors].reverse()},elevatorFree(){for(let t=0;t<this.mines.length;t++)if(this.mines[t].freeElevator)return!0;return!1}},watch:{orderVisitFloor:function(){this.distributor()},elevatorFree:function(t){t&&this.distributor()}},beforeMount(){this.getData().then((t=>{if(localStorage.getItem("floors")){const o=JSON.parse(localStorage.getItem("floors"));if(o.length===t.countFloor){if(this.createFloors(o.length,o),localStorage.getItem("orderVisitFloor")){const t=JSON.parse(localStorage.getItem("orderVisitFloor"));0!==t.length&&t.forEach((t=>{this.orderVisitFloor.push(t)}))}}else localStorage.clear()}else this.createFloors(t.countFloor);if(localStorage.getItem("mines")){const o=JSON.parse(localStorage.getItem("mines"));o.length===t.countMine?(this.createMines(o.length,o),this.mines.forEach((t=>{t.currentFloor!==t.onFloor?this.moveFloor(t):t.direction="stop"}))):localStorage.clear()}else this.createMines(t.countMine)})).catch((t=>{if(console.log(t),localStorage.getItem("floors")){const t=JSON.parse(localStorage.getItem("floors"));7===t.length&&this.createFloors(t.length,t)}else this.createFloors(7);if(localStorage.getItem("mines")){const t=JSON.parse(localStorage.getItem("mines"));7===t.length&&(this.createMines(t.length,t),this.mines.forEach((t=>{t.currentFloor!==t.onFloor?this.moveFloor(t):t.direction="stop"})))}else this.createMines(4)}))},components:{MineElevator:f}},d=v,g=(0,u.Z)(d,n,i,!1,null,null,null),F=g.exports;r.ZP.config.productionTip=!1,new r.ZP({render:t=>t(F)}).$mount("#app")}},o={};function e(r){var n=o[r];if(void 0!==n)return n.exports;var i=o[r]={exports:{}};return t[r](i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(o,r,n,i){if(!r){var s=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],i=t[u][2];for(var l=!0,a=0;a<r.length;a++)(!1&i||s>=i)&&Object.keys(e.O).every((function(t){return e.O[t](r[a])}))?r.splice(a--,1):(l=!1,i<s&&(s=i));if(l){t.splice(u--,1);var c=n();void 0!==c&&(o=c)}}return o}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[r,n,i]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,r){var n,i,s=r[0],l=r[1],a=r[2],c=0;if(s.some((function(o){return 0!==t[o]}))){for(n in l)e.o(l,n)&&(e.m[n]=l[n]);if(a)var u=a(e)}for(o&&o(r);c<s.length;c++)i=s[c],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(u)},r=self["webpackChunkelevator"]=self["webpackChunkelevator"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(4104)}));r=e.O(r)})();
//# sourceMappingURL=app.2f2262ae.js.map